# Copyright 2014 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/chromebox_for_meetings/buildflags.gni")
import("//build/config/chromeos/ui_mode.gni")
import("//build/config/ui.gni")
import("//chromeos/ash/components/hibernate/buildflags.gni")
import("//chromeos/components/sensors/buildflags.gni")
import("//extensions/buildflags/buildflags.gni")
import("//media/media_options.gni")
import("//ppapi/buildflags/buildflags.gni")
import("//printing/buildflags/buildflags.gni")
import("//third_party/protobuf/proto_library.gni")

assert(is_chromeos_ash)
assert(use_ozone)

source_set("chromeos") {
  assert(enable_extensions, "ChromeOS Chrome has to be built with extensions")

  configs += [ "//build/config/compiler:wexit_time_destructors" ]
  public_configs = [ "//build/config/linux/nss" ]

  public_deps = [
    "//ash/resources/vector_icons",
    "//ash/strings",
    "//chrome:extra_resources",
    "//chrome:resources",
    "//chrome:strings",
    "//chrome/app/resources:platform_locale_settings",
    "//chrome/app/theme:chrome_unscaled_resources",
    "//chrome/app/theme:theme_resources",
    "//chrome/browser/ash/power/ml:user_activity_ukm_logger_helpers",
    "//chrome/browser/google",
    "//chrome/browser/ui/webui/ash/crostini_installer:mojo_bindings",
    "//chrome/browser/ui/webui/ash/emoji:mojo_bindings",
    "//chromeos/ash/components/dbus:vm_applications_apps_proto",
    "//chromeos/ash/components/dbus:vm_disk_management_proto",
    "//chromeos/ash/components/dbus:vm_launch_proto",
    "//chromeos/ash/components/dbus:vm_permission_service_proto",
    "//chromeos/ash/components/dbus:vm_sk_forwarding_proto",
    "//chromeos/ash/components/dbus/anomaly_detector:proto",
    "//chromeos/ash/components/dbus/cicerone:cicerone_proto",
    "//chromeos/ash/components/dbus/concierge:concierge_proto",
    "//chromeos/ash/components/dbus/seneschal:seneschal_proto",
    "//chromeos/ash/components/metrics",
    "//chromeos/ash/services/assistant/public/mojom",
    "//chromeos/dbus/power:power_manager_proto",
    "//chromeos/strings",
    "//components/live_caption:constants",
    "//components/policy/proto",
    "//components/reporting/resources:resource_manager",
    "//components/signin/core/browser",
    "//components/startup_metric_utils/browser:browser",
    "//mojo/public/cpp/bindings",
    "//third_party/private-join-and-compute/src:ec_commutative_cipher",
    "//third_party/private_membership:private_membership",
    "//third_party/securemessage/proto",
    "//ui/accessibility/mojom",
    "//ui/chromeos/resources",
    "//ui/chromeos/strings",
    "//ui/chromeos/styles:cros_styles_views",
    "//ui/file_manager/base/gn:file_types_data_cpp",
    "//ui/resources",
    "//ui/strings",
  ]

  deps = [
    ":dlp_policy_event_proto",
    "../ash/guest_os:guest_os_diagnostics_mojom",
    "//apps",
    "//ash",
    "//ash/components/arc",
    "//ash/components/arc/enterprise",
    "//ash/components/arc/input_overlay/resources:resources_grit",
    "//ash/components/arc/media_session",
    "//ash/components/arc/mojom",
    "//ash/constants",
    "//ash/keyboard/ui",
    "//ash/public/cpp",
    "//ash/public/cpp/external_arc",
    "//ash/public/mojom",
    "//ash/quick_pair/common",
    "//ash/quick_pair/feature_status_tracker",
    "//ash/quick_pair/proto:fastpair_proto",
    "//ash/webui/camera_app_ui",
    "//ash/webui/camera_app_ui:document_scanning",
    "//ash/webui/connectivity_diagnostics",
    "//ash/webui/demo_mode_app_ui",
    "//ash/webui/diagnostics_ui",
    "//ash/webui/eche_app_ui",
    "//ash/webui/face_ml_app_ui",
    "//ash/webui/file_manager:file_manager_ui",
    "//ash/webui/file_manager:file_manager_untrusted_ui",
    "//ash/webui/file_manager/resources:file_manager_swa_resources_grit",
    "//ash/webui/file_manager/untrusted_resources:file_manager_untrusted_resources_grit",
    "//ash/webui/firmware_update_ui",
    "//ash/webui/guest_os_installer",
    "//ash/webui/guest_os_installer/mojom",
    "//ash/webui/help_app_ui",
    "//ash/webui/media_app_ui",
    "//ash/webui/media_app_ui:buildflags",
    "//ash/webui/os_feedback_ui",
    "//ash/webui/os_feedback_ui/backend",
    "//ash/webui/os_feedback_ui/mojom",
    "//ash/webui/personalization_app",
    "//ash/webui/personalization_app/mojom",
    "//ash/webui/personalization_app/proto",
    "//ash/webui/print_management",
    "//ash/webui/print_management/resources:resources_grit",
    "//ash/webui/projector_app",
    "//ash/webui/resources:color_internals_resources_grit",
    "//ash/webui/resources:connectivity_diagnostics_resources_grit",
    "//ash/webui/resources:demo_mode_app_resources_grit",
    "//ash/webui/resources:diagnostics_app_resources_grit",
    "//ash/webui/resources:eche_bundle_resources_grit",
    "//ash/webui/resources:face_ml_app_bundle_resources_grit",
    "//ash/webui/resources:face_ml_app_resources_grit",
    "//ash/webui/resources:face_ml_app_untrusted_resources_grit",
    "//ash/webui/resources:files_internals_resources_grit",
    "//ash/webui/resources:firmware_update_app_resources_grit",
    "//ash/webui/resources:help_app_resources_grit",
    "//ash/webui/resources:media_app_bundle_resources_grit",
    "//ash/webui/resources:media_app_resources_grit",
    "//ash/webui/resources:os_feedback_resources_grit",
    "//ash/webui/resources:os_feedback_untrusted_resources_grit",
    "//ash/webui/resources:personalization_app_resources_grit",
    "//ash/webui/resources:projector_app_bundle_resources_grit",
    "//ash/webui/resources:projector_app_trusted_resources_grit",
    "//ash/webui/resources:projector_app_untrusted_resources_grit",
    "//ash/webui/resources:scanning_app_resources_grit",
    "//ash/webui/resources:shimless_rma_resources_grit",
    "//ash/webui/resources:shortcut_customization_app_resources_grit",
    "//ash/webui/resources:system_extensions_internals_resources_grit",
    "//ash/webui/scanning",
    "//ash/webui/scanning/mojom",
    "//ash/webui/shimless_rma",
    "//ash/webui/shimless_rma/backend",
    "//ash/webui/shortcut_customization_ui",
    "//base",
    "//build:branding_buildflags",
    "//build:chromeos_buildflags",
    "//build/config/chromebox_for_meetings:buildflags",
    "//chrome/app:command_ids",
    "//chrome/app/vector_icons",
    "//chrome/browser:browser_process",
    "//chrome/browser:browser_themes",
    "//chrome/browser:theme_properties",
    "//chrome/browser/apps/platform_apps",
    "//chrome/browser/apps/platform_apps/api",
    "//chrome/browser/ash/arc/input_overlay/db/proto:proto",
    "//chrome/browser/ash/crosapi",
    "//chrome/browser/ash/crostini:crostini_installer_types_mojom",
    "//chrome/browser/ash/fusebox:fusebox_proto",
    "//chrome/browser/ash/login/oobe_quick_start",
    "//chrome/browser/ash/nearby:bluetooth_adapter_manager",
    "//chrome/browser/ash/power/ml/smart_dim",
    "//chrome/browser/ash/system_web_apps",
    "//chrome/browser/ash/system_web_apps/types:types",
    "//chrome/browser/ash/wilco_dtc_supportd:mojo_utils",
    "//chrome/browser/browsing_data:constants",
    "//chrome/browser/chromeos/launcher_search:search_util",
    "//chrome/browser/devtools",
    "//chrome/browser/extensions",
    "//chrome/browser/favicon",
    "//chrome/browser/image_decoder",
    "//chrome/browser/metrics/structured",
    "//chrome/browser/nearby_sharing/common",
    "//chrome/browser/nearby_sharing/logging",
    "//chrome/browser/policy:onc",
    "//chrome/browser/policy/messaging_layer/proto:crd_event_proto",
    "//chrome/browser/profiles",
    "//chrome/browser/profiles:profile",
    "//chrome/browser/resource_coordinator:tab_metrics_event_proto",
    "//chrome/browser/resources/chromeos:app_icon_resources",
    "//chrome/browser/resources/chromeos/cloud_upload:resources_grit",
    "//chrome/browser/resources/settings:resources_grit",
    "//chrome/browser/supervised_user/supervised_user_features",
    "//chrome/browser/ui/ash/system_web_apps",
    "//chrome/browser/ui/webui/ash/crostini_upgrader:mojo_bindings",
    "//chrome/browser/ui/webui/bluetooth_internals:mojo_bindings",
    "//chrome/browser/ui/webui/settings/chromeos/constants:mojom",
    "//chrome/browser/web_applications",
    "//chrome/browser/web_applications/extensions:extensions",
    "//chrome/browser/webshare:storage",
    "//chrome/common",
    "//chrome/common/extensions/api",
    "//chrome/services/file_util/public/cpp",
    "//chrome/services/keymaster/public/mojom",
    "//chrome/services/media_gallery_util/public/cpp",
    "//chrome/services/media_gallery_util/public/mojom",
    "//chrome/services/printing/public/mojom",
    "//chrome/services/wilco_dtc_supportd/public/mojom",
    "//chromeos:chromeos_export",
    "//chromeos/ash/components/account_manager",
    "//chromeos/ash/components/assistant:buildflags",
    "//chromeos/ash/components/attestation",
    "//chromeos/ash/components/audio",
    "//chromeos/ash/components/browser_context_helper",
    "//chromeos/ash/components/cryptohome",
    "//chromeos/ash/components/dbus",
    "//chromeos/ash/components/dbus:metrics_event_proto",
    "//chromeos/ash/components/dbus:plugin_vm_service_proto",
    "//chromeos/ash/components/dbus/anomaly_detector",
    "//chromeos/ash/components/dbus/attestation",
    "//chromeos/ash/components/dbus/attestation:attestation_proto",
    "//chromeos/ash/components/dbus/audio",
    "//chromeos/ash/components/dbus/authpolicy",
    "//chromeos/ash/components/dbus/authpolicy:authpolicy_proto",
    "//chromeos/ash/components/dbus/biod",
    "//chromeos/ash/components/dbus/cdm_factory_daemon",
    "//chromeos/ash/components/dbus/chunneld",
    "//chromeos/ash/components/dbus/cicerone",
    "//chromeos/ash/components/dbus/concierge",
    "//chromeos/ash/components/dbus/constants",
    "//chromeos/ash/components/dbus/cros_disks",
    "//chromeos/ash/components/dbus/cros_healthd",
    "//chromeos/ash/components/dbus/cryptohome",
    "//chromeos/ash/components/dbus/cryptohome:attestation_proto",
    "//chromeos/ash/components/dbus/cryptohome:cryptohome_proto",
    "//chromeos/ash/components/dbus/cups_proxy",
    "//chromeos/ash/components/dbus/debug_daemon",
    "//chromeos/ash/components/dbus/dlcservice",
    "//chromeos/ash/components/dbus/dlcservice:dlcservice_proto",
    "//chromeos/ash/components/dbus/easy_unlock",
    "//chromeos/ash/components/dbus/federated",
    "//chromeos/ash/components/dbus/fwupd",
    "//chromeos/ash/components/dbus/gnubby",
    "//chromeos/ash/components/dbus/hermes",
    "//chromeos/ash/components/dbus/human_presence",
    "//chromeos/ash/components/dbus/image_loader",
    "//chromeos/ash/components/dbus/kerberos",
    "//chromeos/ash/components/dbus/kerberos:kerberos_proto",
    "//chromeos/ash/components/dbus/lorgnette_manager",
    "//chromeos/ash/components/dbus/lorgnette_manager:lorgnette_proto",
    "//chromeos/ash/components/dbus/media_analytics",
    "//chromeos/ash/components/dbus/media_analytics:media_perception_proto",
    "//chromeos/ash/components/dbus/oobe_config",
    "//chromeos/ash/components/dbus/oobe_config:proto",
    "//chromeos/ash/components/dbus/os_install",
    "//chromeos/ash/components/dbus/patchpanel",
    "//chromeos/ash/components/dbus/patchpanel:patchpanel_proto",
    "//chromeos/ash/components/dbus/pciguard",
    "//chromeos/ash/components/dbus/resourced",
    "//chromeos/ash/components/dbus/rgbkbd",
    "//chromeos/ash/components/dbus/rmad",
    "//chromeos/ash/components/dbus/seneschal",
    "//chromeos/ash/components/dbus/services",
    "//chromeos/ash/components/dbus/session_manager",
    "//chromeos/ash/components/dbus/session_manager:login_manager_proto",
    "//chromeos/ash/components/dbus/shill",
    "//chromeos/ash/components/dbus/smbprovider",
    "//chromeos/ash/components/dbus/spaced",
    "//chromeos/ash/components/dbus/system_clock",
    "//chromeos/ash/components/dbus/system_proxy",
    "//chromeos/ash/components/dbus/system_proxy:system_proxy_proto",
    "//chromeos/ash/components/dbus/typecd",
    "//chromeos/ash/components/dbus/update_engine",
    "//chromeos/ash/components/dbus/update_engine:proto",
    "//chromeos/ash/components/dbus/upstart",
    "//chromeos/ash/components/dbus/userdataauth",
    "//chromeos/ash/components/dbus/userdataauth:userdataauth_proto",
    "//chromeos/ash/components/dbus/virtual_file_provider",
    "//chromeos/ash/components/dbus/vm_plugin_dispatcher",
    "//chromeos/ash/components/dbus/vm_plugin_dispatcher:proto",
    "//chromeos/ash/components/device_activity",
    "//chromeos/ash/components/disks",
    "//chromeos/ash/components/drivefs",
    "//chromeos/ash/components/drivefs/mojom",
    "//chromeos/ash/components/enhanced_network_tts/mojom",
    "//chromeos/ash/components/feature_usage",
    "//chromeos/ash/components/fwupd",
    "//chromeos/ash/components/geolocation",
    "//chromeos/ash/components/hibernate:buildflags",
    "//chromeos/ash/components/hid_detection",
    "//chromeos/ash/components/install_attributes",
    "//chromeos/ash/components/language/language_packs",
    "//chromeos/ash/components/language/public/mojom",
    "//chromeos/ash/components/local_search_service/public/cpp",
    "//chromeos/ash/components/login/auth",
    "//chromeos/ash/components/login/login_state",
    "//chromeos/ash/components/login/session",
    "//chromeos/ash/components/memory",
    "//chromeos/ash/components/multidevice",
    "//chromeos/ash/components/multidevice:stub_multidevice_util",
    "//chromeos/ash/components/multidevice/logging",
    "//chromeos/ash/components/network",
    "//chromeos/ash/components/network/portal_detector",
    "//chromeos/ash/components/peripheral_notification",
    "//chromeos/ash/components/phonehub",
    "//chromeos/ash/components/phonehub/proto",
    "//chromeos/ash/components/policy",
    "//chromeos/ash/components/power",
    "//chromeos/ash/components/proximity_auth",
    "//chromeos/ash/components/scanning",
    "//chromeos/ash/components/settings",
    "//chromeos/ash/components/smbfs",
    "//chromeos/ash/components/smbfs/mojom",
    "//chromeos/ash/components/string_matching",
    "//chromeos/ash/components/sync_wifi",
    "//chromeos/ash/components/system",
    "//chromeos/ash/components/tether",
    "//chromeos/ash/components/timezone",
    "//chromeos/ash/components/tpm",
    "//chromeos/ash/components/tpm:buildflags",
    "//chromeos/ash/services/assistant:lib",
    "//chromeos/ash/services/assistant/public/cpp",
    "//chromeos/ash/services/bluetooth_config:in_process_bluetooth_config",
    "//chromeos/ash/services/cros_healthd/private/cpp",
    "//chromeos/ash/services/cros_healthd/public/cpp",
    "//chromeos/ash/services/cros_healthd/public/mojom",
    "//chromeos/ash/services/device_sync",
    "//chromeos/ash/services/device_sync:stub_device_sync",
    "//chromeos/ash/services/device_sync/public/cpp",
    "//chromeos/ash/services/ime:constants",
    "//chromeos/ash/services/ime/public/cpp:structs",
    "//chromeos/ash/services/ime/public/mojom",
    "//chromeos/ash/services/multidevice_setup",
    "//chromeos/ash/services/multidevice_setup/public/cpp",
    "//chromeos/ash/services/multidevice_setup/public/cpp:android_sms_app_helper_delegate",
    "//chromeos/ash/services/multidevice_setup/public/cpp:android_sms_pairing_state_tracker",
    "//chromeos/ash/services/multidevice_setup/public/cpp:auth_token_validator",
    "//chromeos/ash/services/multidevice_setup/public/cpp:oobe_completion_tracker",
    "//chromeos/ash/services/multidevice_setup/public/cpp:prefs",
    "//chromeos/ash/services/nearby/public/cpp",
    "//chromeos/ash/services/nearby/public/mojom",
    "//chromeos/ash/services/quick_pair/public/mojom",
    "//chromeos/ash/services/rollback_network_config/public/mojom",
    "//chromeos/ash/services/secure_channel",
    "//chromeos/ash/services/secure_channel/public/cpp/client",
    "//chromeos/ash/services/secure_channel/public/mojom",
    "//chromeos/components/cdm_factory_daemon:cdm_factory_daemon_browser",
    "//chromeos/components/certificate_provider:certificate_provider",
    "//chromeos/components/disks:prefs",
    "//chromeos/components/mojo_bootstrap",
    "//chromeos/components/onc",
    "//chromeos/components/print_management/mojom",
    "//chromeos/components/quick_answers",
    "//chromeos/components/quick_answers/public/cpp:cpp",
    "//chromeos/components/quick_answers/public/cpp:prefs",
    "//chromeos/components/remote_apps/mojom",
    "//chromeos/components/sensors",
    "//chromeos/components/sensors:buildflags",
    "//chromeos/components/sensors/mojom",
    "//chromeos/components/sharesheet:constants",
    "//chromeos/crosapi/cpp",
    "//chromeos/crosapi/mojom",
    "//chromeos/dbus/constants",
    "//chromeos/dbus/dlp",
    "//chromeos/dbus/dlp:dlp_proto",
    "//chromeos/dbus/ip_peripheral",
    "//chromeos/dbus/machine_learning",
    "//chromeos/dbus/missive",
    "//chromeos/dbus/permission_broker",
    "//chromeos/dbus/power",
    "//chromeos/dbus/tpm_manager",
    "//chromeos/dbus/tpm_manager:tpm_manager_proto",
    "//chromeos/dbus/u2f",
    "//chromeos/dbus/u2f:u2f_proto",
    "//chromeos/ime:gencode",
    "//chromeos/printing",
    "//chromeos/services/machine_learning/public/cpp",
    "//chromeos/services/machine_learning/public/mojom",
    "//chromeos/services/network_config:in_process_instance",
    "//chromeos/services/network_config/public/cpp:cpp",
    "//chromeos/services/network_health/public/mojom",
    "//chromeos/startup:constants",
    "//chromeos/ui/base",
    "//chromeos/ui/frame",
    "//chromeos/ui/wm",
    "//chromeos/utils",
    "//chromeos/version",
    "//components/app_constants",
    "//components/app_restore",
    "//components/arc",
    "//components/arc/common",
    "//components/arc/common:arc_intent_helper_constants",
    "//components/autofill/core/browser",
    "//components/browser_sync",
    "//components/captive_portal/core",
    "//components/component_updater:crl_set_remover",
    "//components/consent_auditor:consent_auditor",
    "//components/constrained_window",
    "//components/content_settings/core/browser",
    "//components/country_codes",
    "//components/crash/core/app",
    "//components/crx_file",
    "//components/device_event_log",
    "//components/download/content/public",
    "//components/drive",
    "//components/drive:drive_chromeos",
    "//components/embedder_support:browser_util",
    "//components/enterprise",
    "//components/exo",
    "//components/exo/server",
    "//components/favicon/core",
    "//components/feedback",
    "//components/feedback/content",
    "//components/flags_ui",
    "//components/gcm_driver",
    "//components/google/core/common",
    "//components/guest_os",
    "//components/guest_os:prefs",
    "//components/guest_view/browser",
    "//components/image_fetcher/core",
    "//components/invalidation/impl",
    "//components/keep_alive_registry",
    "//components/keyed_service/content",
    "//components/keyed_service/core",
    "//components/language/core/browser",
    "//components/language/core/common",
    "//components/login",
    "//components/metrics:serialization",
    "//components/metrics/structured:neutrino_logging",
    "//components/metrics/structured:neutrino_logging_util",
    "//components/omnibox/browser",
    "//components/onc",
    "//components/ownership",
    "//components/password_manager/core/browser",
    "//components/password_manager/core/browser:hash_password_manager",
    "//components/performance_manager",
    "//components/permissions",
    "//components/policy:generated",
    "//components/policy/core/browser",
    "//components/policy/core/common",
    "//components/policy/core/common:common_constants",
    "//components/pref_registry",
    "//components/prefs",
    "//components/printing/browser",
    "//components/printing/common:mojo_interfaces",
    "//components/proxy_config",
    "//components/quirks",
    "//components/renderer_context_menu",
    "//components/reporting/client:report_queue",
    "//components/reporting/client:report_queue_configuration",
    "//components/reporting/client:report_queue_factory",
    "//components/reporting/client:report_queue_provider",
    "//components/reporting/metrics:metrics_data_collection",
    "//components/reporting/proto:interface_proto",
    "//components/reporting/proto:metric_data_proto",
    "//components/reporting/proto:record_constants",
    "//components/reporting/proto:status_proto",
    "//components/reporting/storage:storage_module",
    "//components/reporting/storage_selector",
    "//components/reporting/util:backoff_settings",
    "//components/reporting/util:status",
    "//components/reporting/util:task_runner_context",
    "//components/rlz",
    "//components/safe_browsing/core/browser/db:metadata_proto",
    "//components/safe_browsing/core/common/proto:csd_proto",
    "//components/services/app_service:lib",
    "//components/services/app_service/public/cpp:app_types",
    "//components/services/app_service/public/cpp:app_update",
    "//components/services/app_service/public/cpp:icon_types",
    "//components/services/app_service/public/cpp:instance_update",
    "//components/services/app_service/public/cpp:intents",
    "//components/services/app_service/public/cpp:types",
    "//components/services/unzip/content:content",
    "//components/services/unzip/public/cpp:cpp",
    "//components/session_manager/core",
    "//components/signin/public/identity_manager",
    "//components/signin/public/webdata",
    "//components/soda",
    "//components/soda:constants",
    "//components/spellcheck/browser:browser",
    "//components/spellcheck/common:spellcheck_result",
    "//components/storage_monitor",
    "//components/strings",
    "//components/sync",
    "//components/sync_device_info",
    "//components/sync_preferences",
    "//components/sync_sessions",
    "//components/tracing:startup_tracing",
    "//components/translate/core/browser",
    "//components/ukm",
    "//components/ukm/content",
    "//components/unified_consent",
    "//components/update_client:update_client",
    "//components/user_manager",
    "//components/user_prefs:user_prefs",
    "//components/vector_icons",
    "//components/webapps/browser",
    "//extensions/browser/api:api_implementations",
    "//extensions/browser/updater",
    "//media/capture/video/chromeos/public:public",
    "//remoting/host/chromeos:features",

    # This depends directly on the variations target, rather than just
    # transitively via the common target because the proto sources need to
    # be generated before code in this target can start building.
    "//components/variations",
    "//components/viz/host",
    "//components/web_modal",
    "//components/web_resource",
    "//components/webdata/common",
    "//components/zoom",
    "//content/public/browser",
    "//content/public/common",
    "//crypto",
    "//dbus",
    "//device/bluetooth",
    "//extensions/browser",
    "//extensions/browser/kiosk",
    "//extensions/common",
    "//extensions/common:mojom",
    "//google_apis/common",
    "//google_apis/drive",
    "//gpu",
    "//gpu/ipc/host",
    "//gpu/ipc/service",
    "//media",
    "//media/capture:capture_lib",
    "//media/capture:capture_switches",
    "//media/mojo/mojom",
    "//mojo/public/cpp/platform",
    "//mojo/public/cpp/system",
    "//net",

    # TODO: care about enable_printing and enable_print_preview.
    "//printing",
    "//printing/backend",
    "//printing/mojom",
    "//remoting/host/chromeos:host_event_reporter_impl",
    "//remoting/host/chromeos:remoting_service",
    "//remoting/protocol",
    "//remoting/protocol:errors",
    "//services/audio/public/cpp",
    "//services/data_decoder/public/cpp",
    "//services/device/public/cpp/usb",
    "//services/device/public/mojom",
    "//services/device/public/mojom:usb",
    "//services/metrics/public/cpp:ukm_builders",
    "//services/preferences/public/mojom",
    "//services/resource_coordinator/public/cpp:resource_coordinator_cpp",
    "//services/service_manager/public/cpp",
    "//skia",
    "//storage/browser",
    "//storage/common",
    "//third_party/blink/public/common",
    "//third_party/boringssl",
    "//third_party/ced",
    "//third_party/icu",
    "//third_party/libaddressinput",
    "//third_party/libipp",
    "//third_party/metrics_proto",
    "//third_party/protobuf:protobuf_lite",
    "//third_party/protobuf:protoc($host_toolchain)",
    "//third_party/re2",
    "//third_party/zlib",
    "//third_party/zlib/google:compression_utils",
    "//ui/accessibility",
    "//ui/aura",
    "//ui/base",
    "//ui/base:features",
    "//ui/base/idle",
    "//ui/base/ime/ash",
    "//ui/chromeos",
    "//ui/chromeos/events",
    "//ui/compositor",
    "//ui/content_accelerators",
    "//ui/display",
    "//ui/display/manager",
    "//ui/events:dom_keycode_converter",
    "//ui/events/blink",
    "//ui/events/devices",
    "//ui/events/platform",
    "//ui/file_manager",
    "//ui/gfx:gfx",
    "//ui/gfx:gfx_switches",
    "//ui/message_center",
    "//ui/message_center/public/cpp",
    "//ui/ozone",
    "//ui/shell_dialogs",
    "//ui/snapshot",
    "//ui/views",
    "//ui/views/controls/webview",
    "//ui/web_dialogs",
    "//ui/webui",
    "//ui/wm",
    "//ui/wm/public",
    "//url",
  ]

  data_deps = [ ":dbus_service_files" ]

  allow_circular_includes_from = [
    "//chrome/browser/apps/platform_apps/api",
    "//chrome/browser/ash/crosapi",
    "//chrome/browser/extensions",
    "//chrome/browser/web_applications",
    "//chrome/browser/ash/system_web_apps",
    "//chrome/browser/ui/ash/system_web_apps",
    "//chrome/browser/policy:onc",
  ]

  sources = [
    "../ash/extensions/default_app_order.cc",
    "../ash/extensions/default_app_order.h",
    "../ash/extensions/device_local_account_management_policy_provider.cc",
    "../ash/extensions/device_local_account_management_policy_provider.h",
    "../ash/extensions/dictionary_event_router.cc",
    "../ash/extensions/dictionary_event_router.h",
    "../ash/extensions/extensions_permissions_tracker.cc",
    "../ash/extensions/extensions_permissions_tracker.h",
    "../ash/extensions/external_cache.cc",
    "../ash/extensions/external_cache.h",
    "../ash/extensions/external_cache_delegate.cc",
    "../ash/extensions/external_cache_delegate.h",
    "../ash/extensions/external_cache_impl.cc",
    "../ash/extensions/external_cache_impl.h",
    "../ash/extensions/gfx_utils.cc",
    "../ash/extensions/gfx_utils.h",
    "../ash/extensions/ime_menu_event_router.cc",
    "../ash/extensions/ime_menu_event_router.h",
    "../ash/extensions/input_method_event_router.cc",
    "../ash/extensions/input_method_event_router.h",
    "../ash/extensions/install_limiter.cc",
    "../ash/extensions/install_limiter.h",
    "../ash/extensions/install_limiter_factory.cc",
    "../ash/extensions/install_limiter_factory.h",
    "../ash/extensions/media_player_event_router.cc",
    "../ash/extensions/media_player_event_router.h",
    "../ash/extensions/signin_screen_extensions_external_loader.cc",
    "../ash/extensions/signin_screen_extensions_external_loader.h",
    "../ash/extensions/signin_screen_policy_provider.cc",
    "../ash/extensions/signin_screen_policy_provider.h",
    "../ash/extensions/url_constants.h",
    "app_mode/app_session.cc",
    "app_mode/app_session.h",
    "app_mode/app_session_browser_window_handler.cc",
    "app_mode/app_session_browser_window_handler.h",
    "app_mode/app_session_metrics_service.cc",
    "app_mode/app_session_metrics_service.h",
    "app_mode/app_session_policies.cc",
    "app_mode/app_session_policies.h",
    "app_mode/chrome_kiosk_app_installer.cc",
    "app_mode/chrome_kiosk_app_installer.h",
    "app_mode/chrome_kiosk_app_launcher.cc",
    "app_mode/chrome_kiosk_app_launcher.h",
    "app_mode/chrome_kiosk_external_loader_broker.cc",
    "app_mode/chrome_kiosk_external_loader_broker.h",
    "app_mode/kiosk_app_external_loader.cc",
    "app_mode/kiosk_app_external_loader.h",
    "app_mode/kiosk_app_service_launcher.cc",
    "app_mode/kiosk_app_service_launcher.h",
    "app_mode/kiosk_settings_navigation_throttle.cc",
    "app_mode/kiosk_settings_navigation_throttle.h",
    "app_mode/startup_app_launcher_update_checker.cc",
    "app_mode/startup_app_launcher_update_checker.h",
    "app_mode/web_kiosk_browser_controller_base.cc",
    "app_mode/web_kiosk_browser_controller_base.h",
    "arc/icon_decode_request.cc",
    "arc/icon_decode_request.h",
    "extensions/device_local_account_external_policy_loader.cc",
    "extensions/device_local_account_external_policy_loader.h",
    "extensions/info_private_api.cc",
    "extensions/info_private_api.h",
    "policy/dlp/clipboard_bubble.cc",
    "policy/dlp/clipboard_bubble.h",
    "policy/dlp/data_transfer_dlp_controller.cc",
    "policy/dlp/data_transfer_dlp_controller.h",
    "policy/dlp/dlp_clipboard_bubble_constants.h",
    "policy/dlp/dlp_clipboard_notifier.cc",
    "policy/dlp/dlp_clipboard_notifier.h",
    "policy/dlp/dlp_confidential_contents.cc",
    "policy/dlp/dlp_confidential_contents.h",
    "policy/dlp/dlp_confidential_file.cc",
    "policy/dlp/dlp_confidential_file.h",
    "policy/dlp/dlp_content_manager.cc",
    "policy/dlp/dlp_content_manager.h",
    "policy/dlp/dlp_content_manager_observer.h",
    "policy/dlp/dlp_content_observer.cc",
    "policy/dlp/dlp_content_observer.h",
    "policy/dlp/dlp_content_restriction_set.cc",
    "policy/dlp/dlp_content_restriction_set.h",
    "policy/dlp/dlp_content_tab_helper.cc",
    "policy/dlp/dlp_content_tab_helper.h",
    "policy/dlp/dlp_copy_or_move_hook_delegate.cc",
    "policy/dlp/dlp_copy_or_move_hook_delegate.h",
    "policy/dlp/dlp_data_transfer_notifier.cc",
    "policy/dlp/dlp_data_transfer_notifier.h",
    "policy/dlp/dlp_drag_drop_notifier.cc",
    "policy/dlp/dlp_drag_drop_notifier.h",
    "policy/dlp/dlp_file_access_copy_or_move_delegate_factory.cc",
    "policy/dlp/dlp_file_access_copy_or_move_delegate_factory.h",
    "policy/dlp/dlp_histogram_helper.cc",
    "policy/dlp/dlp_histogram_helper.h",
    "policy/dlp/dlp_notification_helper.cc",
    "policy/dlp/dlp_notification_helper.h",
    "policy/dlp/dlp_policy_constants.h",
    "policy/dlp/dlp_reporting_manager.cc",
    "policy/dlp/dlp_reporting_manager.h",
    "policy/dlp/dlp_rules_manager.h",
    "policy/dlp/dlp_rules_manager_factory.cc",
    "policy/dlp/dlp_rules_manager_factory.h",
    "policy/dlp/dlp_rules_manager_impl.cc",
    "policy/dlp/dlp_rules_manager_impl.h",
    "policy/dlp/dlp_scoped_file_access_delegate.cc",
    "policy/dlp/dlp_scoped_file_access_delegate.h",
    "policy/dlp/dlp_warn_dialog.cc",
    "policy/dlp/dlp_warn_dialog.h",
    "policy/dlp/dlp_warn_notifier.cc",
    "policy/dlp/dlp_warn_notifier.h",

    # Extension API implementations.
    "../ash/extensions/autotest_private/autotest_private_api.cc",
    "../ash/extensions/autotest_private/autotest_private_api.h",
    "../ash/extensions/file_manager/device_event_router.cc",
    "../ash/extensions/file_manager/device_event_router.h",
    "../ash/extensions/file_manager/drivefs_event_router.cc",
    "../ash/extensions/file_manager/drivefs_event_router.h",
    "../ash/extensions/file_manager/event_router.cc",
    "../ash/extensions/file_manager/event_router.h",
    "../ash/extensions/file_manager/event_router_factory.cc",
    "../ash/extensions/file_manager/event_router_factory.h",
    "../ash/extensions/file_manager/file_manager_private_api_functions.h",
    "../ash/extensions/file_manager/file_stream_md5_digester.cc",
    "../ash/extensions/file_manager/file_stream_md5_digester.h",
    "../ash/extensions/file_manager/file_system_provider_metrics_util.cc",
    "../ash/extensions/file_manager/file_system_provider_metrics_util.h",
    "../ash/extensions/file_manager/fmpi_get_volume_root_function.cc",
    "../ash/extensions/file_manager/fmpi_get_volume_root_function.h",
    "../ash/extensions/file_manager/logged_extension_function.cc",
    "../ash/extensions/file_manager/logged_extension_function.h",
    "../ash/extensions/file_manager/private_api_dialog.cc",
    "../ash/extensions/file_manager/private_api_dialog.h",
    "../ash/extensions/file_manager/private_api_drive.cc",
    "../ash/extensions/file_manager/private_api_drive.h",
    "../ash/extensions/file_manager/private_api_file_system.cc",
    "../ash/extensions/file_manager/private_api_file_system.h",
    "../ash/extensions/file_manager/private_api_guest_os.cc",
    "../ash/extensions/file_manager/private_api_guest_os.h",
    "../ash/extensions/file_manager/private_api_holding_space.cc",
    "../ash/extensions/file_manager/private_api_holding_space.h",
    "../ash/extensions/file_manager/private_api_media_parser.cc",
    "../ash/extensions/file_manager/private_api_media_parser.h",
    "../ash/extensions/file_manager/private_api_media_parser_util.cc",
    "../ash/extensions/file_manager/private_api_media_parser_util.h",
    "../ash/extensions/file_manager/private_api_misc.cc",
    "../ash/extensions/file_manager/private_api_misc.h",
    "../ash/extensions/file_manager/private_api_mount.cc",
    "../ash/extensions/file_manager/private_api_mount.h",
    "../ash/extensions/file_manager/private_api_sharesheet.cc",
    "../ash/extensions/file_manager/private_api_sharesheet.h",
    "../ash/extensions/file_manager/private_api_strings.cc",
    "../ash/extensions/file_manager/private_api_strings.h",
    "../ash/extensions/file_manager/private_api_tasks.cc",
    "../ash/extensions/file_manager/private_api_tasks.h",
    "../ash/extensions/file_manager/private_api_thumbnail.cc",
    "../ash/extensions/file_manager/private_api_thumbnail.h",
    "../ash/extensions/file_manager/private_api_util.cc",
    "../ash/extensions/file_manager/private_api_util.h",
    "../ash/extensions/file_manager/scoped_suppress_drive_notifications_for_path.cc",
    "../ash/extensions/file_manager/scoped_suppress_drive_notifications_for_path.h",
    "../ash/extensions/file_manager/select_file_dialog_extension_user_data.cc",
    "../ash/extensions/file_manager/select_file_dialog_extension_user_data.h",
    "../ash/extensions/file_manager/system_notification_manager.cc",
    "../ash/extensions/file_manager/system_notification_manager.h",
    "../ash/extensions/input_method_api.cc",
    "../ash/extensions/input_method_api.h",
    "../ash/extensions/login_screen_ui/login_screen_ui_api.cc",
    "../ash/extensions/login_screen_ui/login_screen_ui_api.h",
    "../ash/extensions/login_screen_ui/ui_handler.cc",
    "../ash/extensions/login_screen_ui/ui_handler.h",
    "../ash/extensions/media_player_api.cc",
    "../ash/extensions/media_player_api.h",
    "../ash/extensions/speech/speech_recognition_private_api.cc",
    "../ash/extensions/speech/speech_recognition_private_api.h",
    "../ash/extensions/speech/speech_recognition_private_delegate.h",
    "../ash/extensions/speech/speech_recognition_private_manager.cc",
    "../ash/extensions/speech/speech_recognition_private_manager.h",
    "../ash/extensions/speech/speech_recognition_private_recognizer.cc",
    "../ash/extensions/speech/speech_recognition_private_recognizer.h",
    "../ash/extensions/users_private/users_private_api.cc",
    "../ash/extensions/users_private/users_private_api.h",
    "../ash/extensions/users_private/users_private_delegate.cc",
    "../ash/extensions/users_private/users_private_delegate.h",
    "../ash/extensions/users_private/users_private_delegate_factory.cc",
    "../ash/extensions/users_private/users_private_delegate_factory.h",
    "extensions/echo_private/echo_private_api.cc",
    "extensions/echo_private/echo_private_api.h",
    "extensions/file_system_provider/file_system_provider_api.cc",
    "extensions/file_system_provider/file_system_provider_api.h",
    "extensions/file_system_provider/provider_function.cc",
    "extensions/file_system_provider/provider_function.h",
    "extensions/login_screen/login/cleanup/cleanup_manager_ash.cc",
    "extensions/login_screen/login/cleanup/cleanup_manager_ash.h",
    "extensions/login_screen/login/cleanup/clipboard_cleanup_handler.cc",
    "extensions/login_screen/login/cleanup/clipboard_cleanup_handler.h",
    "extensions/login_screen/login/cleanup/files_cleanup_handler.cc",
    "extensions/login_screen/login/cleanup/files_cleanup_handler.h",
    "extensions/login_screen/login/cleanup/lacros_cleanup_handler.cc",
    "extensions/login_screen/login/cleanup/lacros_cleanup_handler.h",
    "extensions/login_screen/login/cleanup/print_jobs_cleanup_handler.cc",
    "extensions/login_screen/login/cleanup/print_jobs_cleanup_handler.h",
    "extensions/login_screen/login/errors.cc",
    "extensions/login_screen/login/errors.h",
    "extensions/login_screen/login/external_logout_done/external_logout_done_event_handler.cc",
    "extensions/login_screen/login/external_logout_done/external_logout_done_event_handler.h",
    "extensions/login_screen/login/external_logout_done/external_logout_done_event_handler_factory.cc",
    "extensions/login_screen/login/external_logout_done/external_logout_done_event_handler_factory.h",
    "extensions/login_screen/login/login_api_lock_handler.cc",
    "extensions/login_screen/login/login_api_lock_handler.h",
    "extensions/login_screen/login/shared_session_handler.cc",
    "extensions/login_screen/login/shared_session_handler.h",
    "extensions/wallpaper_api.cc",
    "extensions/wallpaper_api.h",
  ]

  defines = []
  if (use_cras) {
    defines += [ "USE_CRAS" ]
  }

  if (use_libfuzzer) {
    deps += [
      "//components/exo/wayland:ui_controls_protocol_stub",
      "//components/exo/wayland:weston_test_stub",
    ]
  }

  if (enable_plugins) {
    sources += [
      "app_mode/kiosk_session_plugin_handler.cc",
      "app_mode/kiosk_session_plugin_handler.h",
      "app_mode/kiosk_session_plugin_handler_delegate.h",
    ]
  }
}

action("dbus_service_files") {
  sources = [
    "../ash/dbus/org.chromium.ChromeFeaturesService.conf",
    "../ash/dbus/org.chromium.ComponentUpdaterService.conf",
    "../ash/dbus/org.chromium.CryptohomeKeyDelegate.conf",
    "../ash/dbus/org.chromium.DlpFilesPolicyService.conf",
    "../ash/dbus/org.chromium.DriveFileStreamService.conf",
    "../ash/dbus/org.chromium.EncryptedReportingUploadService.conf",
    "../ash/dbus/org.chromium.FuseBoxService.conf",
    "../ash/dbus/org.chromium.KioskAppService.conf",
    "../ash/dbus/org.chromium.LibvdaService.conf",
    "../ash/dbus/org.chromium.LockToSingleUser.conf",
    "../ash/dbus/org.chromium.MachineLearningDecisionService.conf",
    "../ash/dbus/org.chromium.MetricsEventService.conf",
    "../ash/dbus/org.chromium.MojoConnectionService.conf",
    "../ash/dbus/org.chromium.NetworkProxyService.conf",
    "../ash/dbus/org.chromium.PrintersService.conf",
    "../ash/dbus/org.chromium.ProfilerStatusService.conf",
    "../ash/dbus/org.chromium.ScreenLockService.conf",
    "../ash/dbus/org.chromium.SmbFsService.conf",
    "../ash/dbus/org.chromium.VirtualFileRequestService.conf",
    "../ash/dbus/vm/org.chromium.PluginVmService.conf",
    "../ash/dbus/vm/org.chromium.VmApplicationsService.conf",
    "../ash/dbus/vm/org.chromium.VmDiskManagementService.conf",
    "../ash/dbus/vm/org.chromium.VmLaunchService.conf",
    "../ash/dbus/vm/org.chromium.VmPermissionService.conf",
    "../ash/dbus/vm/org.chromium.VmSKForwardingService.conf",
  ]
  output_conf_file = "$root_out_dir/dbus/chrome_dbus_services.conf"
  outputs = [ output_conf_file ]

  script = "//chromeos/tools/concat_dbus_conf_files.py"
  args = [ rebase_path(output_conf_file, root_build_dir) ]
  args += rebase_path(sources, root_build_dir)
}

static_library("test_support") {
  testonly = true

  sources = [
    "../ash/extensions/test_external_cache.cc",
    "../ash/extensions/test_external_cache.h",
    "policy/dlp/dlp_content_manager_test_helper.cc",
    "policy/dlp/dlp_content_manager_test_helper.h",
    "policy/dlp/mock_dlp_content_manager.cc",
    "policy/dlp/mock_dlp_content_manager.h",
  ]

  deps = [
    ":chromeos",
    "//ash/constants",
    "//ash/webui/personalization_app/mojom",
    "//chrome/browser:browser_process",
    "//chrome/browser/ash/system_web_apps",
    "//chrome/browser/web_applications",
    "//chrome/common:constants",
    "//chrome/test:test_support",
    "//chrome/test:test_support_ui",
    "//chromeos/ash/components/attestation:test_support",
    "//chromeos/ash/components/cryptohome",
    "//chromeos/ash/components/dbus:test_support",
    "//chromeos/ash/components/dbus/chunneld",
    "//chromeos/ash/components/dbus/cicerone",
    "//chromeos/ash/components/dbus/concierge",
    "//chromeos/ash/components/dbus/cros_disks",
    "//chromeos/ash/components/dbus/cryptohome",
    "//chromeos/ash/components/dbus/cryptohome:cryptohome_proto",
    "//chromeos/ash/components/dbus/dlcservice",
    "//chromeos/ash/components/dbus/lorgnette_manager",
    "//chromeos/ash/components/dbus/lorgnette_manager:lorgnette_proto",
    "//chromeos/ash/components/dbus/seneschal",
    "//chromeos/ash/components/dbus/session_manager",
    "//chromeos/ash/components/dbus/userdataauth:userdataauth",
    "//chromeos/ash/components/dbus/userdataauth:userdataauth_proto",
    "//chromeos/ash/components/drivefs",
    "//chromeos/ash/components/drivefs:test_support",
    "//chromeos/ash/components/login/auth",
    "//chromeos/ash/components/settings",
    "//chromeos/ash/components/system",
    "//chromeos/ash/services/ime:test_support",
    "//chromeos/ash/services/multidevice_setup/public/cpp:test_support",
    "//chromeos/printing",
    "//components/crx_file",
    "//components/drive",
    "//components/exo",
    "//components/policy/core/browser",
    "//components/policy/core/common:test_support",
    "//components/policy/proto",
    "//components/policy/test_support",
    "//components/reporting/client:test_support",
    "//components/session_manager/core",
    "//google_apis",
    "//google_apis:test_support",
    "//google_apis/common",
    "//google_apis/common:test_support",
    "//net",
    "//net:test_support",
    "//skia",
    "//testing/gmock",
    "//testing/gtest",
    "//url",
  ]
}

source_set("unit_tests") {
  testonly = true
  check_includes = false

  sources = [
    "../ash/extensions/default_app_order_unittest.cc",
    "../ash/extensions/device_local_account_management_policy_provider_unittest.cc",
    "../ash/extensions/external_cache_impl_unittest.cc",
    "../ash/extensions/file_manager/device_event_router_unittest.cc",
    "../ash/extensions/file_manager/drivefs_event_router_unittest.cc",
    "../ash/extensions/file_manager/event_router_unittest.cc",
    "../ash/extensions/file_manager/system_notification_manager_unittest.cc",
    "../ash/extensions/gfx_utils_unittest.cc",
    "../ash/extensions/install_limiter_unittest.cc",
    "../ash/extensions/login_screen_ui/ui_handler_unittest.cc",
    "../ash/extensions/signin_screen_policy_provider_unittest.cc",
    "app_mode/app_session_policies_unittest.cc",
    "app_mode/app_session_unittest.cc",
    "app_mode/chrome_kiosk_app_launcher_unittest.cc",
    "app_mode/kiosk_app_service_launcher_unittest.cc",
    "extensions/login_screen/login/cleanup/cleanup_manager_unittest.cc",
    "extensions/login_screen/login/cleanup/extension_cleanup_handler_unittest.cc",
    "extensions/login_screen/login/cleanup/lacros_cleanup_handler_unittest.cc",
    "extensions/login_screen/login/cleanup/mock_cleanup_handler.cc",
    "extensions/login_screen/login/cleanup/mock_cleanup_handler.h",
    "extensions/login_screen/login/cleanup/print_jobs_cleanup_handler_unittest.cc",
    "extensions/login_screen/login/login_api_ash_unittest.cc",
    "policy/dlp/data_transfer_dlp_controller_unittest.cc",
    "policy/dlp/dlp_clipboard_notifier_unittest.cc",
    "policy/dlp/dlp_confidential_contents_unittest.cc",
    "policy/dlp/dlp_confidential_file_unittest.cc",
    "policy/dlp/dlp_content_tab_helper_unittest.cc",
    "policy/dlp/dlp_copy_or_move_hook_delegate_unittest.cc",
    "policy/dlp/dlp_drag_drop_notifier_unittest.cc",
    "policy/dlp/dlp_file_access_copy_or_move_delegate_factory_unittest.cc",
    "policy/dlp/dlp_reporting_manager_test_helper.cc",
    "policy/dlp/dlp_reporting_manager_test_helper.h",
    "policy/dlp/dlp_reporting_manager_unittest.cc",
    "policy/dlp/dlp_rules_manager_impl_unittest.cc",
    "policy/dlp/dlp_rules_manager_test_utils.cc",
    "policy/dlp/dlp_rules_manager_test_utils.h",
    "policy/dlp/dlp_scoped_file_access_delegate_unittest.cc",
    "policy/dlp/mock_dlp_content_observer.cc",
    "policy/dlp/mock_dlp_content_observer.h",
    "policy/dlp/mock_dlp_rules_manager.cc",
    "policy/dlp/mock_dlp_rules_manager.h",
    "policy/dlp/mock_dlp_warn_notifier.cc",
    "policy/dlp/mock_dlp_warn_notifier.h",
    "tablet_mode/chrome_content_browser_client_tablet_mode_part_unittest.cc",

    # TODO(zturner): Enable this on Windows. See
    # BrowserWithTestWindowTest::SetUp() for a comment explaining why this is
    # broken.
    "../../common/extensions/api/file_browser_handlers/file_browser_handler_manifest_unittest.cc",
    "../../common/extensions/api/file_system_provider/file_system_provider_handler_unittest.cc",
  ]
  deps = [
    ":chromeos",
    ":dlp_policy_event_proto",
    ":test_support",
    ":test_with_shadow_variables",
    "//ash",
    "//ash:test_support",
    "//ash/components/arc:arc_test_support",
    "//ash/components/arc:notification_test_support",
    "//ash/constants",
    "//ash/public/cpp",
    "//ash/public/cpp:test_support",
    "//ash/public/cpp/external_arc",
    "//ash/public/cpp/external_arc:test_support",
    "//ash/quick_pair/common",
    "//ash/quick_pair/common:test_support",
    "//ash/quick_pair/proto:fastpair_proto",
    "//ash/quick_pair/repository:test_support",
    "//ash/webui/eche_app_ui:test_support",
    "//base",
    "//build:chromeos_buildflags",
    "//chrome/app:command_ids",
    "//chrome/browser/ash:arc_test_support",
    "//chrome/browser/ash:user_event_reporter_helper_test_support",
    "//chrome/browser/ash/system_web_apps",
    "//chrome/browser/ash/video_conference:unit_tests",
    "//chrome/browser/chromeos/launcher_search:unit_tests",
    "//chrome/browser/ui",
    "//chrome/browser/ui:ash_test_support",
    "//chrome/browser/web_applications",
    "//chrome/common",
    "//chrome/services/keymaster/public/mojom",
    "//chrome/services/wilco_dtc_supportd/public/mojom",
    "//chrome/test:test_support",
    "//chrome/test:test_support_ui",
    "//chrome/test:test_support_unit",
    "//chromeos/ash/components/attestation:test_support",
    "//chromeos/ash/components/audio",
    "//chromeos/ash/components/dbus:test_support",
    "//chromeos/ash/components/dbus/anomaly_detector",
    "//chromeos/ash/components/dbus/attestation",
    "//chromeos/ash/components/dbus/attestation:attestation_proto",
    "//chromeos/ash/components/dbus/authpolicy",
    "//chromeos/ash/components/dbus/constants",
    "//chromeos/ash/components/dbus/cros_disks",
    "//chromeos/ash/components/dbus/cryptohome",
    "//chromeos/ash/components/dbus/cryptohome:attestation_proto",
    "//chromeos/ash/components/dbus/dlcservice",
    "//chromeos/ash/components/dbus/gnubby",
    "//chromeos/ash/components/dbus/lorgnette_manager:lorgnette_proto",
    "//chromeos/ash/components/dbus/oobe_config",
    "//chromeos/ash/components/dbus/services:test_support",
    "//chromeos/ash/components/dbus/session_manager",
    "//chromeos/ash/components/dbus/smbprovider",
    "//chromeos/ash/components/dbus/smbprovider:proto",
    "//chromeos/ash/components/dbus/system_clock",
    "//chromeos/ash/components/dbus/update_engine",
    "//chromeos/ash/components/dbus/upstart",
    "//chromeos/ash/components/dbus/virtual_file_provider",
    "//chromeos/ash/components/dbus/vm_plugin_dispatcher",
    "//chromeos/ash/components/disks:test_support",
    "//chromeos/ash/components/install_attributes:test_support",
    "//chromeos/ash/components/login/auth",
    "//chromeos/ash/components/login/login_state",
    "//chromeos/ash/components/login/login_state:test_support",
    "//chromeos/ash/components/multidevice:test_support",
    "//chromeos/ash/components/network",
    "//chromeos/ash/components/network:test_support",
    "//chromeos/ash/components/network/portal_detector:test_support",
    "//chromeos/ash/components/phonehub:test_support",
    "//chromeos/ash/components/proximity_auth",
    "//chromeos/ash/components/proximity_auth:test_support",
    "//chromeos/ash/components/scanning",
    "//chromeos/ash/components/settings",
    "//chromeos/ash/components/sync_wifi:test_support",
    "//chromeos/ash/components/system",
    "//chromeos/ash/components/tether:test_support",
    "//chromeos/ash/components/tpm",
    "//chromeos/ash/services/device_sync:test_support",
    "//chromeos/ash/services/device_sync/public/cpp:test_support",
    "//chromeos/ash/services/multidevice_setup/public/cpp:prefs",
    "//chromeos/ash/services/multidevice_setup/public/cpp:test_support",
    "//chromeos/ash/services/nearby/public/cpp:test_support",
    "//chromeos/ash/services/nearby/public/mojom",
    "//chromeos/ash/services/secure_channel/public/cpp/client",
    "//chromeos/ash/services/secure_channel/public/cpp/client:test_support",
    "//chromeos/ash/services/secure_channel/public/mojom",
    "//chromeos/components/sensors:test_support",
    "//chromeos/dbus/dlp",
    "//chromeos/dbus/missive",
    "//chromeos/dbus/power",
    "//chromeos/ime:gencode",
    "//chromeos/services/machine_learning/public/cpp:stub",
    "//chromeos/services/network_config:test_support",
    "//chromeos/ui/frame:test_support",
    "//components/account_manager_core:test_support",
    "//components/app_constants",
    "//components/arc",
    "//components/arc/common",
    "//components/arc/common:arc_test_support",
    "//components/component_updater:test_support",
    "//components/content_settings/core/browser",
    "//components/crx_file",
    "//components/download/public/background_service/test:test_support",
    "//components/drive",
    "//components/drive:test_support",
    "//components/exo",
    "//components/exo:test_support",
    "//components/favicon/core/test:test_support",
    "//components/invalidation/impl:test_support",
    "//components/invalidation/public",
    "//components/keyed_service/content",
    "//components/language/core/browser",
    "//components/onc",
    "//components/policy:generated",
    "//components/policy/core/common:test_support",
    "//components/policy/proto",
    "//components/pref_registry",
    "//components/prefs:test_support",
    "//components/renderer_context_menu",
    "//components/reporting/metrics/fakes:test_support",
    "//components/reporting/proto:metric_data_proto",
    "//components/reporting/storage:missive_storage_module",
    "//components/resources",
    "//components/services/app_service/public/cpp:test_support",
    "//components/session_manager/core",
    "//components/sessions:test_support",
    "//components/signin/public/identity_manager:test_support",
    "//components/sync",
    "//components/sync_preferences",
    "//components/sync_sessions",
    "//components/user_prefs",
    "//components/variations:test_support",
    "//content/test:test_support",
    "//dbus",
    "//device/bluetooth",
    "//google_apis:test_support",
    "//google_apis/common",
    "//google_apis/common:test_support",
    "//google_apis/drive",
    "//mojo/public/cpp/bindings",
    "//mojo/public/cpp/system:system",
    "//mojo/public/cpp/test_support:test_utils",
    "//services/audio/public/cpp:test_support",
    "//services/data_decoder/public/cpp:test_support",
    "//services/device/public/cpp:test_support",
    "//services/service_manager/public/cpp/test:test_support",
    "//skia",
    "//storage/browser:test_support",
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/blink/public:blink_headers",
    "//third_party/icu",
    "//third_party/leveldatabase",
    "//third_party/private_membership:private_membership_proto",
    "//third_party/zlib/google:compression_utils",
    "//ui/base:test_support",
    "//ui/base/ime/ash",
    "//ui/base/ime/init",
    "//ui/chromeos/resources",
    "//ui/display:test_support",
    "//ui/events/devices:test_support",
    "//ui/shell_dialogs",
  ]

  if (enable_plugins) {
    sources += [ "app_mode/kiosk_session_plugin_handler_unittest.cc" ]
  }

  if (use_cups) {
    sources +=
        [ "extensions/printing_metrics/printing_metrics_api_unittest.cc" ]
    deps += [ "//chrome/browser/chromeos/extensions/printing_metrics" ]
  }
}

config("allow_shadow_variables") {
  cflags = [ "-Wno-shadow" ]
}

# TODO(b/247823913): Merge this target back into the unit_tests target above
# when third_party/securemessage code stops generating -Wshadow warnings.
source_set("test_with_shadow_variables") {
  testonly = true

  sources = [ "../ash/attestation/soft_bind_attestation_flow_unittest.cc" ]

  configs += [ ":allow_shadow_variables" ]

  deps = [
    ":chromeos",
    "//base",
    "//chrome/browser/ash",
    "//chrome/test:test_support",
    "//chromeos/ash/components/attestation:test_support",
    "//chromeos/ash/components/settings",
    "//content/test:test_support",
    "//crypto",
    "//net",
    "//testing/gtest",
    "//third_party/securemessage",
    "//third_party/securemessage:securemessage_cpp_protobuf",
  ]
}

proto_library("dlp_policy_event_proto") {
  sources = [ "policy/dlp/dlp_policy_event.proto" ]
}
